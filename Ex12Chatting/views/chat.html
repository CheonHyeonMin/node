<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
</head>
<body>
    <fieldset>
        <legend>채팅 내용</legend>
        <!-- class -> mine : 내 채팅(오른쪽 출력), other : 다른사람 채팅(왼쪽 출력) -->
        <div id="chat-list"></div>
    </fieldset>
    <form id="chat-form">
        <input type="text" id="chatinput">
        <input type="submit" value="전송">
    </form>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>   
        io.connect('http://localhost:8888/chat',{ // /chat : chat 네임스페이스 
             path : '/socket.io'
        })                                                                 //e : event(submit 이벤트)
        document.getElementById('chat-form').addEventListener('submit', function(e){
            e.preventDefault()   //서버로 바로 요청하는 기본 기능 수행x
            // console.log(e.target.chatinput.value);
            if(e.target.chatinput.value){
                //서버로 채팅내용을 전송
                axios.post('/chat/{{roomid}}/insert', {
                    chat : e.target.chatinput.value //json형식
                })
                .then(()=>{console.log('success!');})
                .catch((err)=>{console.log(err);})
            }
        })
        
    </script>
    
</body>
</html>